controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (scene.backgroundImage().getPixel(PlayerSprite.x, PlayerSprite.bottom) != 0) {
        PlayerSprite.vy = -100
    }
})
function MakeStartWorld () {
    Map = img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        `
    StartingHightForMakingWorld = randint(55, 100)
    CurrentHightForMakingWorld = StartingHightForMakingWorld
    HowMuchLandComplete = 0
    while (HowMuchLandComplete < 160) {
        if (HightOfLandHowMuchChanged > 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = 1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = 2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = -1
            }
        } else if (HightOfLandHowMuchChanged < 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = -1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = -2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = 1
            }
        } else {
            HightOfLandHowMuchChanged = randint(-1, 1)
        }
        CurrentHightForMakingWorld += HightOfLandHowMuchChanged
        WidthOfPieceOfLand = randint(1, 10)
        Map.fillRect(HowMuchLandComplete, CurrentHightForMakingWorld, WidthOfPieceOfLand, 114 - CurrentHightForMakingWorld, 14)
        HowMuchLandComplete += WidthOfPieceOfLand
    }
    EndingHightForMakingWorld = CurrentHightForMakingWorld
    scene.setBackgroundImage(Map)
    StartingHights = [StartingHightForMakingWorld]
    EndingHights = [parseFloat("" + EndingHightForMakingWorld)]
    Maps = [Map]
    CurrentMap = 0
}
function MakeLeftWorld () {
    // Sets the base map, or the map without terrain.
    Map = img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        `
    // Sets the ending height. Unlike the right world function, the left world function draws the terrain from right to left. So, this is more like the starting height.
    EndingHightForMakingWorld = EndingHights[CurrentMap]
    // Sets the current terrain height.
    CurrentHightForMakingWorld = EndingHightForMakingWorld
    // Sets how much land is generated.
    HowMuchLandComplete = 0
    // While there is still screen left to cover.
    while (HowMuchLandComplete < 160) {
        // All of the blocks in this if statement are used to randomly change the height of the land.
        if (HightOfLandHowMuchChanged > 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = 1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = 2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = -1
            }
        } else if (HightOfLandHowMuchChanged < 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = -1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = -2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = 1
            }
        } else {
            HightOfLandHowMuchChanged = randint(-1, 1)
        }
        CurrentHightForMakingWorld += HightOfLandHowMuchChanged
        // Sets how large the new piece of land will be.
        WidthOfPieceOfLand = randint(1, 10)
        // Draws the terrain. (This is where the error most likely happens)
        Map.fillRect(HowMuchLandComplete, CurrentHightForMakingWorld, WidthOfPieceOfLand, 114 - CurrentHightForMakingWorld, 14)
        // Resets the "How much land complete" variable.
        HowMuchLandComplete += WidthOfPieceOfLand
    }
    // Sets the starting height. This is actually the ending height for the make left function.
    StartingHightForMakingWorld = CurrentHightForMakingWorld
    Map.flipX()
    // Sets the background image to the map.
    scene.setBackgroundImage(Map)
    // The rest of the blocks are just used for storing data, and do not affect the actual screen. Therefore, they are not the parts of code that cause the error. 
    StartingHights.unshift(StartingHightForMakingWorld)
    EndingHights.unshift(parseFloat("" + EndingHightForMakingWorld))
    Maps.unshift(Map)
}
function MoveCursor () {
    if (controller.player2.isPressed(ControllerButton.Left)) {
        CursorX += -0.7
    } else if (controller.player2.isPressed(ControllerButton.Right)) {
        CursorX += 0.7
    } else if (controller.player2.isPressed(ControllerButton.Up)) {
        CursorY += -0.7
    } else if (controller.player2.isPressed(ControllerButton.Down)) {
        CursorY += 0.7
    }
}
function MakeRightWorld () {
    Map = img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        `
    StartingHightForMakingWorld = EndingHights[CurrentMap]
    CurrentHightForMakingWorld = StartingHightForMakingWorld
    HowMuchLandComplete = 0
    while (HowMuchLandComplete < 160) {
        if (HightOfLandHowMuchChanged > 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = 1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = 2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = -1
            }
        } else if (HightOfLandHowMuchChanged < 0) {
            if (Math.percentChance(50)) {
                HightOfLandHowMuchChanged = -1
            } else if (Math.percentChance(10)) {
                HightOfLandHowMuchChanged = -2
            } else if (Math.percentChance(20)) {
                HightOfLandHowMuchChanged = 0
            } else {
                HightOfLandHowMuchChanged = 1
            }
        } else {
            HightOfLandHowMuchChanged = randint(-1, 1)
        }
        CurrentHightForMakingWorld += HightOfLandHowMuchChanged
        WidthOfPieceOfLand = randint(1, 10)
        Map.fillRect(HowMuchLandComplete, CurrentHightForMakingWorld, WidthOfPieceOfLand, 114 - CurrentHightForMakingWorld, 14)
        HowMuchLandComplete += WidthOfPieceOfLand
    }
    EndingHightForMakingWorld = CurrentHightForMakingWorld
    scene.setBackgroundImage(Map)
    StartingHights.push(StartingHightForMakingWorld)
    EndingHights.push(parseFloat("" + EndingHightForMakingWorld))
    Maps.push(Map)
    CurrentMap += 1
}
let CurrentMap = 0
let Maps: Image[] = []
let EndingHights: number[] = []
let StartingHights: number[] = []
let EndingHightForMakingWorld = 0
let WidthOfPieceOfLand = 0
let HightOfLandHowMuchChanged = 0
let HowMuchLandComplete = 0
let CurrentHightForMakingWorld = 0
let StartingHightForMakingWorld = 0
let Map: Image = null
let PlayerSprite: Sprite = null
MakeStartWorld()
// Dave
// Jayden
// Caroline
// Soren
// Nicole
// Alex
// Hendrick
// Jeremiah
let Characters = [
img`
    7 7 7 7 7 
    7 7 1 1 1 
    1 7 1 1 1 
    1 1 f 1 f 
    1 1 1 1 1 
    . 1 f f . 
    d 7 7 7 . 
    d 7 d 7 . 
    d 7 7 7 . 
    . 7 . 7 . 
    `,
img`
    . f f f . 
    f f f c f 
    f c c a a 
    f c d a d 
    f c c c a 
    . a c c . 
    b f f f . 
    b f b f . 
    b f f f . 
    . f . f . 
    `,
img`
    . 2 2 2 2 
    2 d d d d 
    2 d d d d 
    2 d 8 d 8 
    2 d d d d 
    2 d c c . 
    2 3 3 3 . 
    a 3 a 3 . 
    a 3 3 3 . 
    . 3 . 3 . 
    `,
img`
    . f f f f 
    e e e e e 
    e e e e e 
    e e f e f 
    e e e e e 
    . e f f . 
    2 5 5 5 . 
    2 5 2 5 . 
    2 5 5 5 . 
    . 5 . 5 . 
    `,
img`
    . a a a a 
    a b b b b 
    a b a b b 
    b a f b f 
    b b b b b 
    . b f f . 
    6 8 8 8 . 
    6 8 6 8 . 
    6 8 8 8 . 
    . 8 . 8 . 
    `,
img`
    . d d d d 
    d d 4 4 d 
    d d 4 4 4 
    d 4 f 4 f 
    d 4 4 4 4 
    . 4 f f . 
    d 1 1 1 . 
    d 1 d 1 . 
    d 1 1 1 . 
    . 1 . 1 . 
    `,
img`
    . 1 1 1 1 
    d d d d d 
    d d d d d 
    d d f d f 
    d d d d d 
    . d b b . 
    7 8 8 8 . 
    7 8 7 8 . 
    7 8 8 8 . 
    . 8 . 8 . 
    `,
img`
    . d d d d 
    f f f f f 
    f f f f f 
    f f b f b 
    f f f f f 
    . f b b . 
    d c c c . 
    d c d c . 
    d c c c . 
    . c . c . 
    `
]
scene.setBackgroundColor(9)
PlayerSprite = sprites.create(img`
    . 1 1 1 1 
    d d d d d 
    d d d d d 
    d d f d f 
    d d d d d 
    . d b b . 
    7 8 8 8 . 
    7 8 7 8 . 
    7 8 8 8 . 
    . 8 . 8 . 
    `, SpriteKind.Player)
PlayerSprite.ay = 300
PlayerSprite.setFlag(SpriteFlag.StayInScreen, true)
controller.moveSprite(PlayerSprite, 50, 0)
let Cursor = sprites.create(img`
    . f . 
    f f f 
    . f . 
    `, SpriteKind.Player)
controller.player2.moveSprite(Cursor)
let CursorX = 4
let CursorY = 0
let Items = [
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
"",
""
]
let AmountOfItems = [
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0
]
let InventoryBottom = sprites.create(img`
    .ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.
    .f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.f24444444444442f.
    .f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.f22222222222222f.
    .ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.ffffffffffffffff.
    `, SpriteKind.Player)
InventoryBottom.top = 1
game.onUpdate(function () {
    if (scene.backgroundImage().getPixel(PlayerSprite.x, PlayerSprite.bottom) == 14) {
        PlayerSprite.vy = 0
    }
    if (scene.backgroundImage().getPixel(PlayerSprite.x, PlayerSprite.bottom - 1) == 14) {
        PlayerSprite.y += -1
        PlayerSprite.vy = 0
    }
    if (scene.backgroundImage().getPixel(PlayerSprite.x, PlayerSprite.top) == 14) {
        if (PlayerSprite.vx < 0) {
            PlayerSprite.x += 1
        } else if (PlayerSprite.vx > 0) {
            PlayerSprite.x += -1
        }
        PlayerSprite.vy = 0
    }
    if (scene.backgroundImage().getPixel(PlayerSprite.right, PlayerSprite.y) == 14) {
        PlayerSprite.vy = 0
        PlayerSprite.x += -1
    }
    if (scene.backgroundImage().getPixel(PlayerSprite.left, PlayerSprite.y) == 14) {
        PlayerSprite.vy = 0
        PlayerSprite.x += 1
    }
})
game.onUpdate(function () {
    MoveCursor()
    if (CursorX > 12) {
        CursorX = 12
    } else if (CursorX < -12) {
        CursorX = -12
    }
    if (CursorY > 12) {
        CursorY = 12
    } else if (CursorY < -12) {
        CursorY = -12
    }
    if (controller.A.isPressed()) {
        for (let index = 0; index <= 2; index++) {
            spriteutils.drawCircle(
            Maps[CurrentMap],
            Cursor.x - 1,
            Cursor.y - 1,
            index + 1,
            0
            )
            Maps[CurrentMap].fillRect(Cursor.x - 2, Cursor.y - 2, 3, 3, 0)
        }
    }
    Cursor.setPosition(PlayerSprite.x + CursorX, PlayerSprite.y + CursorY)
})
game.onUpdate(function () {
    if (PlayerSprite.right == 160) {
        if (CurrentMap == Maps.length - 1) {
            color.startFade(color.originalPalette, color.Black, 500)
            MakeRightWorld()
            color.startFade(color.Black, color.originalPalette, 500)
            PlayerSprite.left = 10
        } else {
            CurrentMap += 1
            scene.setBackgroundImage(Maps[CurrentMap])
            PlayerSprite.left = 10
        }
    } else if (PlayerSprite.left == 0) {
        if (CurrentMap == 0) {
            color.startFade(color.originalPalette, color.Black, 500)
            MakeLeftWorld()
            color.startFade(color.Black, color.originalPalette, 500)
            PlayerSprite.right = 150
        } else {
            CurrentMap += -1
            color.startFade(color.originalPalette, color.Black, 500)
            scene.setBackgroundImage(Maps[CurrentMap])
            color.startFade(color.Black, color.originalPalette, 500)
            PlayerSprite.right = 150
        }
    }
})
